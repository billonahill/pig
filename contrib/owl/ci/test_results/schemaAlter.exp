<COMMAND> drop owltable testschema1 within owldatabase testSchemaAlterDB
<IGNORE>
<COMMAND> drop owltable testschema2 within owldatabase testSchemaAlterDB
<IGNORE>
<COMMAND> drop owldatabase testSchemaAlterDB
<IGNORE>
<COMMAND> create owldatabase testSchemaAlterDB identified by storage directory "http://namenode:8080/data/testSchemaAlterDBdir"
<SUCCESS>
<COMMAND> create owltable type basic testschema1 within owldatabase testSchemaAlterDB schema "test1:int"
<SUCCESS>
<COMMAND> create owltable type basic testschema2 within owldatabase testSchemaAlterDB  partitioned by LIST with partition key year:INTEGER partitioned by LIST with partition key month:INTEGER  schema "c1:int,c2:record(c22:collection(c222:record(c2222:bool)))"
<SUCCESS>
<COMMAND> publish dataelement to owltable testschema1 within owldatabase testSchemaAlterDB schema "c1:int" delocation "testloc1nopart"
<SUCCESS>
<COMMAND> describe owltable testschema1 within owldatabase testSchemaAlterDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaalterdb","tableName":"testschema1"},"partitionKeys":[],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"test1","type":"INT"},{"columnNumber":1,"name":"c1","type":"INT"}]}}
<COMMAND> alter owltable testschema1 within owldatabase testSchemaAlterDB set schema "test2:int"
<SUCCESS>
<COMMAND> describe owltable testschema1 within owldatabase testSchemaAlterDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaalterdb","tableName":"testschema1"},"partitionKeys":[],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"test2","type":"INT"}]}}
<COMMAND> select partition objects from owltable testschema1 within owldatabase testSchemaAlterDB
<RESULT> OwlPartition 1
{"creationTime":0,"keyValues":[],"leaf":true,"loader":{},"modificationTime":0,"partitionLevel":0,"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"}]},"storageLocation":"testloc1nopart"}
<COMMAND> publish dataelement to owltable testschema2 within owlDatabase testSchemaAlterDB partition (year = 2009, month = 1) schema "x1:int,c2:record(c22:collection(c222:record(c2222:bool)))" delocation "testloc1"
<SUCCESS>
<COMMAND> publish dataelement to owltable testschema2 within owlDatabase testSchemaAlterDB partition (year = 2009, month = 2) schema "y1:int,c2:record(c22:collection(c222:record(c2222:bool)))" delocation "testloc2"
<SUCCESS>
<COMMAND> alter owltable testschema2 within owldatabase testSchemaAlterDB set schema "c2:record(c22:collection(c222:record(c2222:bool))),c1:int,y1:int"
<SUCCESS>
<COMMAND> describe owltable testschema2 within owldatabase testSchemaAlterDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaalterdb","tableName":"testschema2"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"year","partitioningType":"LIST"},{"dataType":"INT","level":2,"listValues":[],"name":"month","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"year","type":"INT"},{"columnNumber":1,"name":"month","type":"INT"},{"columnNumber":2,"name":"c2","schema":{"columnSchema":[{"columnNumber":0,"name":"c22","schema":{"columnSchema":[{"columnNumber":0,"name":"c222","schema":{"columnSchema":[{"columnNumber":0,"name":"c2222","type":"BOOL"}]},"type":"RECORD"}]},"type":"COLLECTION"}]},"type":"RECORD"},{"columnNumber":3,"name":"c1","type":"INT"},{"columnNumber":4,"name":"y1","type":"INT"}]}}
<COMMAND> publish dataelement to owltable testschema2 within owlDatabase testSchemaAlterDB partition (year = 2009, month = 3) schema "z1:int" delocation "testloc3"
<SUCCESS>
<COMMAND> describe owltable testschema2 within owldatabase testSchemaAlterDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaalterdb","tableName":"testschema2"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"year","partitioningType":"LIST"},{"dataType":"INT","level":2,"listValues":[],"name":"month","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"year","type":"INT"},{"columnNumber":1,"name":"month","type":"INT"},{"columnNumber":2,"name":"c2","schema":{"columnSchema":[{"columnNumber":0,"name":"c22","schema":{"columnSchema":[{"columnNumber":0,"name":"c222","schema":{"columnSchema":[{"columnNumber":0,"name":"c2222","type":"BOOL"}]},"type":"RECORD"}]},"type":"COLLECTION"}]},"type":"RECORD"},{"columnNumber":3,"name":"c1","type":"INT"},{"columnNumber":4,"name":"y1","type":"INT"},{"columnNumber":5,"name":"z1","type":"INT"}]}}
<COMMAND> alter owltable testschema2 within owldatabase testSchemaAlterDB set schema "y1:int,year:int,month:int,c1:int"
<SUCCESS>
<COMMAND> describe owltable testschema2 within owldatabase testSchemaAlterDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaalterdb","tableName":"testschema2"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"year","partitioningType":"LIST"},{"dataType":"INT","level":2,"listValues":[],"name":"month","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"y1","type":"INT"},{"columnNumber":1,"name":"year","type":"INT"},{"columnNumber":2,"name":"month","type":"INT"},{"columnNumber":3,"name":"c1","type":"INT"}]}}
<COMMAND> select partition objects from owltable testschema2 within owldatabase testSchemaAlterDB
<RESULT> OwlPartition 3
{"creationTime":0,"keyValues":[{"dataType":"INT","intValue":1,"keyName":"month","keyType":"PARTITION"},{"dataType":"INT","intValue":2009,"keyName":"year","keyType":"PARTITION"}],"leaf":true,"loader":{},"modificationTime":0,"partitionLevel":2,"schema":{"columnSchema":[{"columnNumber":0,"name":"x1","type":"INT"},{"columnNumber":1,"name":"c2","schema":{"columnSchema":[{"columnNumber":0,"name":"c22","schema":{"columnSchema":[{"columnNumber":0,"name":"c222","schema":{"columnSchema":[{"columnNumber":0,"name":"c2222","type":"BOOL"}]},"type":"RECORD"}]},"type":"COLLECTION"}]},"type":"RECORD"}]},"storageLocation":"testloc1"}
{"creationTime":0,"keyValues":[{"dataType":"INT","intValue":2,"keyName":"month","keyType":"PARTITION"},{"dataType":"INT","intValue":2009,"keyName":"year","keyType":"PARTITION"}],"leaf":true,"loader":{},"modificationTime":0,"partitionLevel":2,"schema":{"columnSchema":[{"columnNumber":0,"name":"y1","type":"INT"},{"columnNumber":1,"name":"c2","schema":{"columnSchema":[{"columnNumber":0,"name":"c22","schema":{"columnSchema":[{"columnNumber":0,"name":"c222","schema":{"columnSchema":[{"columnNumber":0,"name":"c2222","type":"BOOL"}]},"type":"RECORD"}]},"type":"COLLECTION"}]},"type":"RECORD"}]},"storageLocation":"testloc2"}
{"creationTime":0,"keyValues":[{"dataType":"INT","intValue":3,"keyName":"month","keyType":"PARTITION"},{"dataType":"INT","intValue":2009,"keyName":"year","keyType":"PARTITION"}],"leaf":true,"loader":{},"modificationTime":0,"partitionLevel":2,"schema":{"columnSchema":[{"columnNumber":0,"name":"z1","type":"INT"}]},"storageLocation":"testloc3"}
<COMMAND> drop owltable testschema1 within owldatabase testSchemaAlterDB
<SUCCESS>
<COMMAND> drop owltable testschema2 within owldatabase testSchemaAlterDB
<SUCCESS>
<COMMAND> drop owldatabase testSchemaAlterDB
<SUCCESS>
