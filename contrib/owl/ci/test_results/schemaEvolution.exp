<COMMAND> drop owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB
<IGNORE>
<COMMAND> drop owltable testComplexSchema within owldatabase testSchemaEvolutionDB
<IGNORE>
<COMMAND> drop owldatabase testSchemaEvolutionDB
<IGNORE>
<COMMAND> create owldatabase testSchemaEvolutionDB identified by storage directory "hdfs://localhost:9000/data/testSchemaEvolutionDB"
<SUCCESS>
<COMMAND> create owltable type basic testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB partitioned by LIST with partition key c1 : INTEGER schema "c1:int,c2:string"
<SUCCESS>
<COMMAND> publish dataelement to owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB partition (c1 = 2008 ) schema "c1:int,c2:string,c3:int" delocation "testSchemaEvolutionTable/partition1" loader "testloader"
<SUCCESS>
<COMMAND> describe owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaevolutiondb","tableName":"testschemaevolutiontable"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"c1","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"c3","type":"INT"}]}}
<COMMAND> publish dataelement to owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB partition (c1 = 2009 ) schema "c1:int,c2:string,c4:int" delocation "testSchemaEvolutionTable/partition2" loader "testloader"
<SUCCESS>
<COMMAND> describe owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaevolutiondb","tableName":"testschemaevolutiontable"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"c1","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"c3","type":"INT"},{"columnNumber":3,"name":"c4","type":"INT"}]}}
<COMMAND> select partition objects from owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB
<RESULT> OwlPartition 2
{"creationTime":0,"keyValues":[{"dataType":"INT","intValue":2008,"keyName":"c1","keyType":"PARTITION"}],"leaf":true,"loader":{"inputDriverClass":"testloader"},"modificationTime":0,"partitionLevel":1,"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"c3","type":"INT"}]},"storageLocation":"testSchemaEvolutionTable/partition1"}
{"creationTime":0,"keyValues":[{"dataType":"INT","intValue":2009,"keyName":"c1","keyType":"PARTITION"}],"leaf":true,"loader":{"inputDriverClass":"testloader"},"modificationTime":0,"partitionLevel":1,"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"c4","type":"INT"}]},"storageLocation":"testSchemaEvolutionTable/partition2"}
<COMMAND> create owltable type basic testComplexSchema within owldatabase testSchemaEvolutionDB partitioned by LIST with partition key c1 : INTEGER schema "c1:int,c2:string,s_bytes:bytes,s_int:int,s_long:long,s_float:float,s_double:double,m_1:map,m_2:map,m_3:map,ml_1:collection(r1:record(m:map)),ml_2:collection(r2:record(m:map)),ml_3:collection(r3:record(m:map))"
<SUCCESS>
<COMMAND> describe owltable testComplexSchema within owldatabase testSchemaEvolutionDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaevolutiondb","tableName":"testcomplexschema"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"c1","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"s_bytes","type":"BYTES"},{"columnNumber":3,"name":"s_int","type":"INT"},{"columnNumber":4,"name":"s_long","type":"LONG"},{"columnNumber":5,"name":"s_float","type":"FLOAT"},{"columnNumber":6,"name":"s_double","type":"DOUBLE"},{"columnNumber":7,"name":"m_1","schema":{"columnSchema":[{"columnNumber":0,"name":"","type":"STRING"}]},"type":"MAP"},{"columnNumber":8,"name":"m_2","schema":{"columnSchema":[{"columnNumber":0,"name":"","type":"STRING"}]},"type":"MAP"},{"columnNumber":9,"name":"m_3","schema":{"columnSchema":[{"columnNumber":0,"name":"","type":"STRING"}]},"type":"MAP"},{"columnNumber":10,"name":"ml_1","schema":{"columnSchema":[{"columnNumber":0,"name":"r1","schema":{"columnSchema":[{"columnNumber":0,"name":"m","schema":{"columnSchema":[{"columnNumber":0,"name":"","type":"STRING"}]},"type":"MAP"}]},"type":"RECORD"}]},"type":"COLLECTION"},{"columnNumber":11,"name":"ml_2","schema":{"columnSchema":[{"columnNumber":0,"name":"r2","schema":{"columnSchema":[{"columnNumber":0,"name":"m","schema":{"columnSchema":[{"columnNumber":0,"name":"","type":"STRING"}]},"type":"MAP"}]},"type":"RECORD"}]},"type":"COLLECTION"},{"columnNumber":12,"name":"ml_3","schema":{"columnSchema":[{"columnNumber":0,"name":"r3","schema":{"columnSchema":[{"columnNumber":0,"name":"m","schema":{"columnSchema":[{"columnNumber":0,"name":"","type":"STRING"}]},"type":"MAP"}]},"type":"RECORD"}]},"type":"COLLECTION"}]}}
<COMMAND> publish dataelement to owltable testComplexSchema within owldatabase testSchemaEvolutionDB partition (c1 = 2008 ) schema "c1:int,c2:string,s_bytes:bytes,s_int:int,s_long:long,s_float:float,s_double:double,yy:bytes, m_1:map,m_2:map,m_3:map,ml_1:collection(r1:record(m:map)),ml_2:collection(r2:record(m:map)),ml_3:collection(r3:record(m:map))" delocation "testComplexSchema/partition1" loader "testloader"
<SUCCESS>
<COMMAND> publish dataelement to owltable testComplexSchema within owldatabase testSchemaEvolutionDB partition (c1 = 2009 ) schema "c1:int,c2:string,s_bytes:bytes,s_int:int,s_long:long,s_float:float,tt:int,s_double:double,m_1:map,m_2:map,m_3:map,ml_1:collection(r1:record(m:map)),ml_2:collection(r2:record(m:map)),ml_3:collection(r3:record((m:map))" delocation "testComplexSchema/partition2" loader "testloader"
<EXCEPTION> org.apache.hadoop.owl.common.OwlException : 6002 : Error occurred while processing schema string. Cause : Encountered " "(" "( "" at line 1, column 209.
<COMMAND> describe owltable testComplexSchema within owldatabase testSchemaEvolutionDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaevolutiondb","tableName":"testcomplexschema"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"c1","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"s_bytes","type":"BYTES"},{"columnNumber":3,"name":"s_int","type":"INT"},{"columnNumber":4,"name":"s_long","type":"LONG"},{"columnNumber":5,"name":"s_float","type":"FLOAT"},{"columnNumber":6,"name":"s_double","type":"DOUBLE"},{"columnNumber":7,"name":"m_1","schema":{"columnSchema":[{"columnNumber":0,"type":"STRING"}]},"type":"MAP"},{"columnNumber":8,"name":"m_2","schema":{"columnSchema":[{"columnNumber":0,"type":"STRING"}]},"type":"MAP"},{"columnNumber":9,"name":"m_3","schema":{"columnSchema":[{"columnNumber":0,"type":"STRING"}]},"type":"MAP"},{"columnNumber":10,"name":"ml_1","schema":{"columnSchema":[{"columnNumber":0,"name":"r1","schema":{"columnSchema":[{"columnNumber":0,"name":"m","schema":{"columnSchema":[{"columnNumber":0,"type":"STRING"}]},"type":"MAP"}]},"type":"RECORD"}]},"type":"COLLECTION"},{"columnNumber":11,"name":"ml_2","schema":{"columnSchema":[{"columnNumber":0,"name":"r2","schema":{"columnSchema":[{"columnNumber":0,"name":"m","schema":{"columnSchema":[{"columnNumber":0,"type":"STRING"}]},"type":"MAP"}]},"type":"RECORD"}]},"type":"COLLECTION"},{"columnNumber":12,"name":"ml_3","schema":{"columnSchema":[{"columnNumber":0,"name":"r3","schema":{"columnSchema":[{"columnNumber":0,"name":"m","schema":{"columnSchema":[{"columnNumber":0,"type":"STRING"}]},"type":"MAP"}]},"type":"RECORD"}]},"type":"COLLECTION"},{"columnNumber":13,"name":"yy","type":"BYTES"}]}}
<COMMAND> publish dataelement to owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB partition (c1 = 2010 ) schema "c3:string" delocation "testSchemaEvolutionTable/partition4" loader "testloader"
<EXCEPTION> org.apache.hadoop.owl.common.OwlException : 6002 : Error occurred while processing schema string. Cause : Different types of column c3 in schema union
<COMMAND> describe owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB
<RESULT> OwlTable 1
{"creationTime":0,"modificationTime":0,"name":{"databaseName":"testschemaevolutiondb","tableName":"testschemaevolutiontable"},"partitionKeys":[{"dataType":"INT","level":1,"listValues":[],"name":"c1","partitioningType":"LIST"}],"propertyKeys":[],"propertyValues":[],"schema":{"columnSchema":[{"columnNumber":0,"name":"c1","type":"INT"},{"columnNumber":1,"name":"c2","type":"STRING"},{"columnNumber":2,"name":"c3","type":"INT"},{"columnNumber":3,"name":"c4","type":"INT"}]}}
<COMMAND> drop owltable testSchemaEvolutionTable within owldatabase testSchemaEvolutionDB
<SUCCESS>
<COMMAND> drop owltable testComplexSchema within owldatabase testSchemaEvolutionDB
<SUCCESS>
<COMMAND> drop owldatabase testSchemaEvolutionDB
<SUCCESS>
