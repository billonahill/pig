--cleanup environment
drop owltable testOwlTable within owlDatabase testOwlDatabase;
drop owltable testOwlTable1 within owlDatabase testOwlDatabase;
drop owltable testOwlTable2 within owlDatabase testOwlDatabase;
drop owlDatabase testOwlDatabase;

--Initialize environment
create owlDatabase testOwlDatabase identified by storage directory "hdfs://namenode:8080/data/testowlDatabase";

select owlDatabase objects where owlDatabase in (testOwlDatabase);

create owltable type basic testOwlTable within owlDatabase testOwlDatabase define property key retention:INTEGER partitioned by LIST with partition key year:INTEGER define property key month:INTEGER, date:INTEGER partitioned by INTERVAL ("2009-11-09 18:00:00 PDT", 15 Minutes) with partition key datest partitioned by LIST with partition key part2 : STRING schema "test1:int";

-- create owltable type basic testOwlTable1 within owlDatabase testOwlDatabase define property key retention:INTEGER partitioned by LIST with partition key year:INTEGER define property key month:INTEGER, date:INTEGER schema "test1:int";

-- create owltable type basic testOwlTable2 within owlDatabase testOwlDatabase define property key domain:STRING partitioned by LIST with partition key country:STRING define property key climate:STRING, date:INTEGER schema "test1:int";

publish dataelement to owltable testOwlTable within owlDatabase testOwlDatabase partition (year = 2009, datest = "2009-11-09 18:00:00 PDT", part2 = "three") property (retention = 1, month = 8, date = 1) schema "c1:collection(f1:int, f2:int)" delocation "http"; 

--select dataelements
 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year >= 2009, datest > "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year <= 2009, datest <= "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year <= 2009, datest >= "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year <= 2009, datest >= "2009-11-09 18:00:00 PDT",  part2 LIKE "%t%") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year <= 2009, datest >= "2009-11-09 18:00:00 PDT",  part2 LIKE "%g%") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year > 2009, datest < "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year < 2009, datest < "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year >= 2007, datest > "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

 select dataelement objects from owltable testOwlTable within owlDatabase testOwlDatabase with partition ( year <= 2007, datest > "2009-11-09 18:00:00 PDT", part2 = "three") property ( month >= 8, date >= 1); 

-- --cleanup
drop owltable testOwlTable within owlDatabase testOwlDatabase;
drop owltable testOwlTable1 within owlDatabase testOwlDatabase;
drop owltable testOwlTable2 within owlDatabase testOwlDatabase;
drop owlDatabase testOwlDatabase;
